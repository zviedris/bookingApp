{{template "base" .}}

{{define "content"}}
<div id="main-carousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
    <div class="carousel-indicators">
        <button type="button" data-bs-target="#main-carousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#main-carousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#main-carousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
      </div>
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="static/images/woman-laptop.png" class="d-block w-100" alt="Women and a laptop">
            <div class="carousel-caption d-none d-md-block">
                <h5>Third slide label</h5>
                <p>Some representative placeholder content for the third slide.</p>
            </div>
        </div>
      <div class="carousel-item">
        <img src="/static/images/tray.png" class="d-block w-100" alt="Tray with coffee">
        <div class="carousel-caption d-none d-md-block">
            <h5>Third slide label</h5>
            <p>Some representative placeholder content for the third slide.</p>
        </div>  
    </div>
      <div class="carousel-item">
        <img src="/static/images/outside.png" class="d-block w-100" alt="Outside">
        <div class="carousel-caption d-none d-md-block">
            <h5>Third slide label</h5>
            <p>Some representative placeholder content for the third slide.</p>
        </div>  
    </div>
    </div>
  </div>

<div class="container">
    <div class="row">
        <div class="col">
            <h1 class="text-center mt-4"> Nature Bed and Breakfast</h1>
            Your home away from home!
        </div>
    </div>
</div>

<div class="row">
    <div class = "col text-center">
        <a id="searchroom" class="btn btn-success">Make Reservation Now</a>        
    </div>
</div>
{{end}}

{{define "js"}}
<script>
    const button = document.getElementById('searchroom');
    var token = document.getElementById('csrf_toke').value;
    
    var getActive = browser.tabs.query({active: true, currentWindow: true});
    getActive.then(setCookie);

    function setCookie(tabs) {
    browser.cookies.set({
        url: tabs[0].url,
        csrf_token: token
    });
    }

    button.addEventListener('click', async _ => {
        try {     
        const response = await fetch('/searchroom', {
            method: 'post'
        });
        console.log('Completed!', response);
        } catch(err) {
        console.error(`Error: ${err}`);
        }
    });
</script>
{{end}}